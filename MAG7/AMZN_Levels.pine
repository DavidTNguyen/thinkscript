//@version=6
indicator("AMZN Spot Gamma & Tech Levels (Jan 8, 2026)", overlay=true)

// --- Spot Gamma Exposure Levels (Derived from Chart) ---
// Major call walls/gamma spikes observed
var float gamma_250 = 250.00
var float gamma_245 = 245.00
var float gamma_240 = 240.00
var float gamma_260 = 260.00

// Spot Price Reference
var float spot_price = 245.28

// --- Technical Analysis Levels ---
var float r1 = 246.64
var float r2 = 248.02
var float s1 = 242.88
var float s2 = 240.50

var float fib_382 = 242.00
var float fib_500 = 242.69
var float fib_618 = 243.39

var float sma_50 = 232.94
var float sma_200 = 217.88

// --- Plotting Gamma Levels ---
plot(gamma_250, title="Gamma Level 250", color=color.new(color.purple, 20), linewidth=2, style=plot.style_circles)
plot(gamma_245, title="Gamma Level 245", color=color.new(color.purple, 20), linewidth=2, style=plot.style_circles)
plot(gamma_240, title="Gamma Level 240", color=color.new(color.purple, 20), linewidth=2, style=plot.style_circles)
plot(gamma_260, title="Gamma Level 260", color=color.new(color.purple, 20), linewidth=1, style=plot.style_circles)

// --- Plotting Technical Levels ---
// Resistance
p_r1 = plot(r1, title="R1", color=color.red, linewidth=1, style=plot.style_linebr)
p_r2 = plot(r2, title="R2", color=color.red, linewidth=1, style=plot.style_linebr)

// Support
p_s1 = plot(s1, title="S1", color=color.green, linewidth=1, style=plot.style_linebr)
p_s2 = plot(s2, title="S2", color=color.green, linewidth=1, style=plot.style_linebr)

// Fibonacci
plot(fib_382, title="Fib 38.2%", color=color.new(color.orange, 30), linewidth=1)
plot(fib_500, title="Fib 50%", color=color.new(color.orange, 30), linewidth=1)
plot(fib_618, title="Fib 61.8%", color=color.new(color.orange, 30), linewidth=1)

// SMAs
plot(sma_50, title="SMA 50", color=color.blue, linewidth=2)
plot(sma_200, title="SMA 200", color=color.black, linewidth=2)

// Labels
if barstate.islast
    // Gamma
    label.new(bar_index + 5, gamma_250, "G", style=label.style_label_left, color=color.purple, textcolor=color.white)
    label.new(bar_index + 5, gamma_245, "G", style=label.style_label_left, color=color.purple, textcolor=color.white)
    label.new(bar_index + 5, gamma_240, "G", style=label.style_label_left, color=color.purple, textcolor=color.white)
    label.new(bar_index + 5, gamma_260, "G", style=label.style_label_left, color=color.plum, textcolor=color.white)

    // Tech
    label.new(bar_index + 5, r1, "R1", style=label.style_label_left, color=color.red, textcolor=color.white)
    label.new(bar_index + 5, r2, "R2", style=label.style_label_left, color=color.red, textcolor=color.white)
    label.new(bar_index + 5, s1, "S1", style=label.style_label_left, color=color.green, textcolor=color.white)
    label.new(bar_index + 5, s2, "S2", style=label.style_label_left, color=color.green, textcolor=color.white)

    // Fibs
    label.new(bar_index + 5, fib_382, "38.2%", style=label.style_label_left, color=color.orange, textcolor=color.white)
    label.new(bar_index + 5, fib_500, "50%", style=label.style_label_left, color=color.orange, textcolor=color.white)
    label.new(bar_index + 5, fib_618, "61.8%", style=label.style_label_left, color=color.orange, textcolor=color.white)

    // SMAs
    label.new(bar_index + 5, sma_50, "SMA50", style=label.style_label_left, color=color.blue, textcolor=color.white)
    label.new(bar_index + 5, sma_200, "SMA200", style=label.style_label_left, color=color.black, textcolor=color.white)

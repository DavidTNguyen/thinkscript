//@version=6
indicator("SPX DEC 29 - Year-End Flow Week", overlay=true, max_lines_count=500, max_labels_count=500)

// === SPX DEC 29 - Year-End Flow Week ===
// 
// MARKET CONTEXT:
// ðŸŽ¯ JPM COLLAR RESTRIKE - Massive gamma/vega reset at 7,000 strike
//    Typically 2:00-3:00PM on Dec 31 - Dealer positioning chess
//    Flows over fundamentals into year-end
//
// ðŸ§Š VOL STRUCTURE:
// VIX 14.8, light volume, systematic flows dominate
// Market mechanical in chop zone - dealer hedging behavior
//
// ðŸ“Š EXPECTED MOVES (EM expands into collar restrike):
// Monday: EM 25pts â†’ 6890-6940 (ref 6915)
// Tuesday: EM 35pts â†’ 6880-6950 (FOMC Minutes - wiggles not conviction)
// Wednesday: EM 50pts â†’ 6865-6965 (JPM COLLAR RESTRIKE - MAIN EVENT)
// Friday: EM 60pts â†’ 6855-6975
//
// ðŸ‹ CTA/VOL CONTROL POSITIONING:
// CTAs projected BUYERS even in down tape - floor effect
// VOL control strategies adding systematic bid underneath
// Descent gets cushioned by mechanical flows
//
// ðŸ“¦ UPDATED STRUCTURE:
// Resistance: 6925/6930
// Support: 6885-6870 zone
//
// ðŸ”‘ CROSS-ASSET: Gold/silver making moves - algo signal flashing
//
// UPSIDE SCENARIOS (ABOVE RESISTANCE):
// Above 6930 -> 6945-6950 decision area
// Above 6950 -> 6960 negative GEX, sticky battleground
// Above 6960 -> 6975 outside resistance
//
// DOWNSIDE SCENARIOS (BELOW SUPPORT):
// Below 6870 -> 6855-6850 GEX support / gap fill convergence
// Below 6850 -> 6840 extended
//
// ðŸ“Œ BOTTOM LINE:
// 6925/30 = resistance zone
// 6885-6870 = support zone
// Wednesday JPM collar restrike = THE systematic event

// === INPUTS ===
// Upside Targets
level1 = input.float(6975, "Outside Resistance", group="ðŸŽ¯ Upside Targets")
level1_thickness = input.int(2, "6975 Line Thickness", minval=1, maxval=10, group="ðŸŽ¯ Upside Targets")
level2 = input.float(6960, "Negative GEX / Sticky Battleground", group="ðŸŽ¯ Upside Targets")
level2_thickness = input.int(2, "6960 Line Thickness", minval=1, maxval=10, group="ðŸŽ¯ Upside Targets")
level3 = input.float(6950, "Round Number / Top of EM", group="ðŸŽ¯ Upside Targets")
level3_thickness = input.int(2, "6950 Line Thickness", minval=1, maxval=10, group="ðŸŽ¯ Upside Targets")

// Decision Area
level4 = input.float(6945, "Decision Area", group="ðŸ“Š Decision Area")
level4_thickness = input.int(1, "6945 Line Thickness", minval=1, maxval=10, group="ðŸ“Š Decision Area")

// Resistance Zone (RED)
level5 = input.float(6930, "ðŸ”´ Resistance Zone Top", group="ðŸ”´ Resistance Zone")
level5_thickness = input.int(3, "6930 Line Thickness", minval=1, maxval=10, group="ðŸ”´ Resistance Zone")
level6 = input.float(6925, "ðŸ”´ Resistance Zone Bottom", group="ðŸ”´ Resistance Zone")
level6_thickness = input.int(3, "6925 Line Thickness", minval=1, maxval=10, group="ðŸ”´ Resistance Zone")

// Round Number
level7 = input.float(6900, "Round Number", group="ðŸ“ Key Levels")
level7_thickness = input.int(2, "6900 Line Thickness", minval=1, maxval=10, group="ðŸ“ Key Levels")

// Support Zone (GREEN)
level8 = input.float(6885, "ðŸŸ¢ Support Zone Top", group="ðŸŸ¢ Support Zone")
level8_thickness = input.int(3, "6885 Line Thickness", minval=1, maxval=10, group="ðŸŸ¢ Support Zone")
level9 = input.float(6880, "ðŸŸ¢ Support Zone", group="ðŸŸ¢ Support Zone")
level9_thickness = input.int(2, "6880 Line Thickness", minval=1, maxval=10, group="ðŸŸ¢ Support Zone")
level10 = input.float(6870, "ðŸŸ¢ Support Zone Bottom", group="ðŸŸ¢ Support Zone")
level10_thickness = input.int(3, "6870 Line Thickness", minval=1, maxval=10, group="ðŸŸ¢ Support Zone")

// Gap / Extended Support
level11 = input.float(6855, "Gap Hold", group="âš¡ Extended Levels")
level11_thickness = input.int(1, "6855 Line Thickness", minval=1, maxval=10, group="âš¡ Extended Levels")
level12 = input.float(6850, "Gap Fill / GEX Support", group="âš¡ Extended Levels")
level12_thickness = input.int(2, "6850 Line Thickness", minval=1, maxval=10, group="âš¡ Extended Levels")
level13 = input.float(6840, "Below Gap", group="âš¡ Extended Levels")
level13_thickness = input.int(1, "6840 Line Thickness", minval=1, maxval=10, group="âš¡ Extended Levels")
level14 = input.float(6820, "Extended Support", group="âš¡ Extended Levels")
level14_thickness = input.int(2, "6820 Line Thickness", minval=1, maxval=10, group="âš¡ Extended Levels")

// JPM Collar / Key Strikes
level_collar_strike = input.float(7000, "ðŸŽ¯ JPM Collar Restrike (Dec 31)", group="ðŸŽ¯ JPM Collar")
level_gex_support = input.float(6850, "GEX Support Zone", group="ðŸŽ¯ JPM Collar")

// Alert Settings
enableAlerts = input.bool(true, "Enable Alerts", group="ðŸ”” Alert Settings")
alertSensitivity = input.float(5.0, "Alert Sensitivity", minval=0.1, maxval=10.0, group="ðŸ”” Alert Settings")

// Label Visibility
showLabels = input.bool(true, "Show Labels", group="ðŸ“Š Display Settings")
showLines = input.bool(true, "Show Level Lines", group="ðŸ“Š Display Settings")
showTable = input.bool(false, "Show Status Table", group="ðŸ“Š Display Settings")

// === LEVEL LINES ===
var line l1 = na
var line l2 = na
var line l3 = na
var line l4 = na
var line l5 = na
var line l6 = na
var line l7 = na
var line l8 = na
var line l9 = na
var line l10 = na
var line l11 = na
var line l12 = na
var line l13 = na
var line l14 = na
var line l_collar_strike = na

if showLines and barstate.islast
    // Outside Resistance - 6975 (Red)
    l1 := line.new(bar_index - 100, level1, bar_index + 20, level1, color=color.red, width=level1_thickness, style=line.style_dashed)
    
    // Negative GEX - 6960 (Red)
    l2 := line.new(bar_index - 100, level2, bar_index + 20, level2, color=color.red, width=level2_thickness, style=line.style_solid)
    
    // Round Number Top of EM - 6950 (Magenta)
    l3 := line.new(bar_index - 100, level3, bar_index + 20, level3, color=color.fuchsia, width=level3_thickness, style=line.style_solid)
    
    // Decision Area - 6945 (Orange)
    l4 := line.new(bar_index - 100, level4, bar_index + 20, level4, color=color.orange, width=level4_thickness, style=line.style_solid)
    
    // Resistance Zone Top - 6930 (Red, thick)
    l5 := line.new(bar_index - 100, level5, bar_index + 20, level5, color=color.red, width=level5_thickness, style=line.style_solid)
    
    // Resistance Zone Bottom - 6925 (Red, thick)
    l6 := line.new(bar_index - 100, level6, bar_index + 20, level6, color=color.red, width=level6_thickness, style=line.style_solid)
    
    // Round Number - 6900 (Cyan)
    l7 := line.new(bar_index - 100, level7, bar_index + 20, level7, color=color.aqua, width=level7_thickness, style=line.style_solid)
    
    // Support Zone Top - 6885 (Green, thick)
    l8 := line.new(bar_index - 100, level8, bar_index + 20, level8, color=color.lime, width=level8_thickness, style=line.style_solid)
    
    // Support Zone - 6880 (Green)
    l9 := line.new(bar_index - 100, level9, bar_index + 20, level9, color=color.lime, width=level9_thickness, style=line.style_solid)
    
    // Support Zone Bottom - 6870 (Green, thick)
    l10 := line.new(bar_index - 100, level10, bar_index + 20, level10, color=color.lime, width=level10_thickness, style=line.style_solid)
    
    // Gap Hold - 6855 (Cyan)
    l11 := line.new(bar_index - 100, level11, bar_index + 20, level11, color=color.aqua, width=level11_thickness, style=line.style_solid)
    
    // Gap Fill / GEX Support - 6850 (Green)
    l12 := line.new(bar_index - 100, level12, bar_index + 20, level12, color=color.lime, width=level12_thickness, style=line.style_solid)
    
    // Below Gap - 6840 (Green)
    l13 := line.new(bar_index - 100, level13, bar_index + 20, level13, color=color.lime, width=level13_thickness, style=line.style_solid)
    
    // Extended Support - 6820 (Green)
    l14 := line.new(bar_index - 100, level14, bar_index + 20, level14, color=color.lime, width=level14_thickness, style=line.style_solid)
    
    // JPM Collar Strike - 7000 (Magenta, dashed)
    l_collar_strike := line.new(bar_index - 100, level_collar_strike, bar_index + 20, level_collar_strike, color=color.fuchsia, width=3, style=line.style_dashed)

// === LABELS ===
if barstate.islast and showLabels
    label.new(bar_index + 8, level_collar_strike, "7000 ðŸŽ¯ JPM Collar", style=label.style_label_left, color=color.fuchsia, textcolor=color.white, size=size.large)
    label.new(bar_index + 8, level1, "6975 Outside Res", style=label.style_label_left, color=color.red, textcolor=color.white)
    label.new(bar_index + 8, level2, "6960 Neg GEX", style=label.style_label_left, color=color.red, textcolor=color.white)
    label.new(bar_index + 8, level3, "6950 Top EM", style=label.style_label_left, color=color.fuchsia, textcolor=color.white)
    label.new(bar_index + 8, level4, "6945 Decision", style=label.style_label_left, color=color.orange, textcolor=color.white)
    label.new(bar_index + 8, level5, "6930 ðŸ”´ Res Top", style=label.style_label_left, color=color.red, textcolor=color.white, size=size.large)
    label.new(bar_index + 8, level6, "6925 ðŸ”´ Res Bot", style=label.style_label_left, color=color.red, textcolor=color.white, size=size.large)
    label.new(bar_index + 8, level7, "6900 Round", style=label.style_label_left, color=color.aqua, textcolor=color.black)
    label.new(bar_index + 8, level8, "6885 ðŸŸ¢ Sup Top", style=label.style_label_left, color=color.lime, textcolor=color.black, size=size.large)
    label.new(bar_index + 8, level9, "6880 ðŸŸ¢ Support", style=label.style_label_left, color=color.lime, textcolor=color.black)
    label.new(bar_index + 8, level10, "6870 ðŸŸ¢ Sup Bot", style=label.style_label_left, color=color.lime, textcolor=color.black, size=size.large)
    label.new(bar_index + 8, level11, "6855 Gap Hold", style=label.style_label_left, color=color.aqua, textcolor=color.black)
    label.new(bar_index + 8, level12, "6850 Gap/GEX", style=label.style_label_left, color=color.lime, textcolor=color.black)
    label.new(bar_index + 8, level13, "6840 Below Gap", style=label.style_label_left, color=color.lime, textcolor=color.black)
    label.new(bar_index + 8, level14, "6820 Extended", style=label.style_label_left, color=color.lime, textcolor=color.black)

// === POSITION DETECTION ===
above7000 = close > level_collar_strike  // Above JPM Collar
at7000 = close >= level_collar_strike - 5 and close <= level_collar_strike + 5
above6975 = close > level1  // Outside Resistance
at6975 = close >= level1 - 5 and close <= level1 + 5
above6960 = close > level2  // Negative GEX
at6960 = close >= level2 - 5 and close <= level2 + 5
above6950 = close > level3  // Top of EM
at6950 = close >= level3 - 5 and close <= level3 + 5
above6945 = close > level4  // Decision Area
at6945 = close >= level4 - 5 and close <= level4 + 5
above6930 = close > level5  // Resistance Top
at6930 = close >= level5 - 5 and close <= level5 + 5
above6925 = close > level6  // Resistance Bottom
at6925 = close >= level6 - 5 and close <= level6 + 5
above6900 = close > level7  // Round Number
at6900 = close >= level7 - 5 and close <= level7 + 5
above6885 = close > level8  // Support Top
at6885 = close >= level8 - 5 and close <= level8 + 5
above6880 = close > level9  // Support
at6880 = close >= level9 - 5 and close <= level9 + 5
above6870 = close > level10 // Support Bottom
at6870 = close >= level10 - 5 and close <= level10 + 5
below6870 = close < level10
above6855 = close > level11 // Gap Hold
at6855 = close >= level11 - 5 and close <= level11 + 5
above6850 = close > level12 // Gap Fill / GEX Support
at6850 = close >= level12 - 5 and close <= level12 + 5
above6840 = close > level13 // Below Gap
at6840 = close >= level13 - 5 and close <= level13 + 5
above6820 = close > level14 // Extended Support
at6820 = close >= level14 - 5 and close <= level14 + 5
below6820 = close < level14

// Zone detection
inResistanceZone = close >= level6 and close <= level5  // 6925-6930 resistance zone
inSupportZone = close >= level10 and close <= level8    // 6870-6885 support zone
inChopZone = close >= level10 and close <= level5       // 6870-6930 chop zone

// Volume spike detection
volSpike = volume > ta.sma(volume, 20) * 1.5

// === ALERT CONDITIONS ===

// JPM COLLAR STRIKE
alertcondition(ta.crossover(close, level_collar_strike), "7000 JPM COLLAR", "SPX >> 7000 ðŸŽ¯ JPM COLLAR STRIKE!")
alertcondition(at7000, "At 7000", "SPX at 7000 - JPM Collar Restrike Level!")

// OUTSIDE RESISTANCE
alertcondition(ta.crossover(close, level1), "6975 OUTSIDE RES", "SPX >> 6975 - Outside Resistance!")
alertcondition(at6975, "At 6975", "SPX at 6975 - Outside Resistance!")

// NEGATIVE GEX
alertcondition(ta.crossover(close, level2), "6960 NEG GEX UP", "SPX UP 6960 - Negative GEX / Sticky Battleground!")
alertcondition(ta.crossunder(close, level2), "6960 NEG GEX DOWN", "SPX DOWN 6960 - Below Negative GEX!")
alertcondition(at6960, "At 6960", "SPX at 6960 - Negative GEX!")

// TOP OF EM
alertcondition(ta.crossover(close, level3), "6950 TOP EM", "SPX >> 6950 - Top of Expected Move!")
alertcondition(at6950, "At 6950", "SPX at 6950 - Round Number / Top of EM!")

// DECISION AREA
alertcondition(ta.crossover(close, level4), "6945 DECISION UP", "SPX >> 6945 - Decision Area!")
alertcondition(ta.crossunder(close, level4), "6945 DECISION DOWN", "SPX << 6945 - Below Decision Area!")

// RESISTANCE ZONE TOP (6930)
alertcondition(ta.crossover(close, level5), "6930 RES TOP UP", "SPX UP 6930 ðŸ”´ Above Resistance Zone!")
alertcondition(ta.crossunder(close, level5), "6930 RES TOP DOWN", "SPX DOWN 6930 ðŸ”´ Entering Resistance Zone!")
alertcondition(at6930, "At 6930 Res", "SPX at 6930 ðŸ”´ Resistance Zone Top!")

// RESISTANCE ZONE BOTTOM (6925)
alertcondition(ta.crossover(close, level6), "6925 RES BOT UP", "SPX UP 6925 ðŸ”´ Entering Resistance Zone!")
alertcondition(ta.crossunder(close, level6), "6925 RES BOT DOWN", "SPX DOWN 6925 - Below Resistance Zone!")
alertcondition(at6925, "At 6925 Res", "SPX at 6925 ðŸ”´ Resistance Zone Bottom!")

// ROUND NUMBER
alertcondition(ta.crossover(close, level7), "6900 RECLAIM", "SPX UP 6900 - Reclaiming Round Number!")
alertcondition(ta.crossunder(close, level7), "6900 LOST", "SPX DOWN 6900 - Below Round Number!")
alertcondition(at6900, "At 6900", "SPX at 6900 - Round Number!")

// SUPPORT ZONE TOP (6885)
alertcondition(ta.crossover(close, level8), "6885 SUP TOP UP", "SPX UP 6885 - Above Support Zone!")
alertcondition(ta.crossunder(close, level8), "6885 SUP TOP DOWN", "SPX DOWN 6885 ðŸŸ¢ Entering Support Zone!")
alertcondition(at6885, "At 6885 Sup", "SPX at 6885 ðŸŸ¢ Support Zone Top!")

// SUPPORT ZONE (6880)
alertcondition(ta.crossover(close, level9), "6880 SUPPORT UP", "SPX >> 6880 ðŸŸ¢ Support holding!")
alertcondition(ta.crossunder(close, level9), "6880 SUPPORT DOWN", "SPX << 6880 - Below Support!")

// SUPPORT ZONE BOTTOM (6870)
alertcondition(ta.crossover(close, level10), "6870 SUP BOT UP", "SPX UP 6870 ðŸŸ¢ Bouncing from Support Zone Bottom!")
alertcondition(ta.crossunder(close, level10), "6870 SUP BOT DOWN", "SPX DOWN 6870 ðŸŸ¢ Support Zone Breached!")
alertcondition(at6870, "At 6870 Sup", "SPX at 6870 ðŸŸ¢ Support Zone Bottom!")

// GAP HOLD (6855)
alertcondition(ta.crossunder(close, level11), "6855 GAP HOLD", "SPX >> 6855 - Gap Hold level!")

// GAP FILL / GEX SUPPORT (6850)
alertcondition(ta.crossover(close, level12), "6850 GEX BOUNCE", "SPX UP 6850 - Bounce from GEX Support!")
alertcondition(ta.crossunder(close, level12), "6850 GEX BREACH", "SPX DOWN 6850 - GEX Support Breached!")
alertcondition(at6850, "At 6850 GEX", "SPX at 6850 - Gap Fill / GEX Support!")

// BELOW GAP (6840)
alertcondition(ta.crossunder(close, level13), "6840 BELOW GAP", "SPX >> 6840 - Below Gap!")

// EXTENDED SUPPORT (6820)
alertcondition(ta.crossunder(close, level14), "6820 EXTENDED", "SPX >> 6820 - Extended Support!")
alertcondition(at6820, "At 6820", "SPX at 6820 - Extended Support!")
alertcondition(below6820, "Below 6820", "SPX < 6820 - Below Extended Support!")

// ZONE ALERTS
alertcondition(inResistanceZone, "In Resistance Zone", "SPX in RESISTANCE ZONE (6925-6930) ðŸ”´!")
alertcondition(inSupportZone, "In Support Zone", "SPX in SUPPORT ZONE (6870-6885) ðŸŸ¢!")

// === STATUS TABLE ===
var table statusTable = table.new(position.top_right, 2, 20, border_width=1)

if barstate.islast and showLabels and showTable
    // Header
    table.cell(statusTable, 0, 0, "SPX DEC 29 ðŸŽ¯", bgcolor=color.new(color.fuchsia, 70), text_color=color.white)
    table.cell(statusTable, 1, 0, str.tostring(close, "#.##"), bgcolor=color.new(color.fuchsia, 70), text_color=color.white)
    
    // Alert Status
    table.cell(statusTable, 0, 1, "Alerts", text_color=color.white)
    table.cell(statusTable, 1, 1, enableAlerts ? "ON" : "OFF", bgcolor=enableAlerts ? color.green : color.red, text_color=color.white)
    
    // Bias based on positioning
    bias = above6930 ? "ðŸ“ˆ ABOVE RES" : inResistanceZone ? "ðŸ”´ RES ZONE" : inSupportZone ? "ðŸŸ¢ SUP ZONE" : inChopZone ? "âš¡ CHOP" : below6870 ? "ðŸ“‰ BREAKDOWN" : "ðŸ“ NEUTRAL"
    biasColor = above6930 ? color.green : inResistanceZone ? color.red : inSupportZone ? color.lime : inChopZone ? color.purple : below6870 ? color.red : color.yellow
    table.cell(statusTable, 0, 2, "Bias", text_color=color.white)
    table.cell(statusTable, 1, 2, bias, bgcolor=color.new(biasColor, 70), text_color=color.white)
    
    // Position Status
    position = above7000 ? "â†‘ Above Collar!" : above6975 ? "Outside Res" : above6960 ? "Neg GEX" : above6950 ? "Top EM" : above6930 ? "Above Res" : inResistanceZone ? "ðŸ”´ Res Zone" : above6900 ? "Above 6900" : inSupportZone ? "ðŸŸ¢ Sup Zone" : above6850 ? "Gap Hold" : above6820 ? "Below Gap" : "Extended"
    posColor = above6975 ? color.lime : above6930 ? color.lime : inResistanceZone ? color.red : above6900 ? color.aqua : inSupportZone ? color.lime : above6850 ? color.yellow : color.orange
    table.cell(statusTable, 0, 3, "Position", text_color=color.white)
    table.cell(statusTable, 1, 3, position, bgcolor=color.new(posColor, 70), text_color=color.white)
    
    // Strategy
    strategy = above6930 ? "Watch 6945-6950 decision" : inResistanceZone ? "Fade or Break?" : inSupportZone ? "Hold for bounce" : above6850 ? "Watch gap fill" : "Extended - caution"
    table.cell(statusTable, 0, 4, "Strategy", text_color=color.white)
    table.cell(statusTable, 1, 4, strategy, bgcolor=color.new(color.blue, 80), text_color=color.white)
    
    // Key Levels
    table.cell(statusTable, 0, 5, "ðŸ”´ Resistance", text_color=color.white)
    table.cell(statusTable, 1, 5, "6925-6930", bgcolor=color.new(color.red, 80), text_color=color.white)
    
    table.cell(statusTable, 0, 6, "ðŸŸ¢ Support", text_color=color.white)
    table.cell(statusTable, 1, 6, "6870-6885", bgcolor=color.new(color.lime, 80), text_color=color.black)
    
    table.cell(statusTable, 0, 7, "ðŸŽ¯ JPM Collar", text_color=color.white)
    table.cell(statusTable, 1, 7, "7000 (Dec 31)", bgcolor=color.new(color.fuchsia, 80), text_color=color.white)
    
    table.cell(statusTable, 0, 8, "GEX Support", text_color=color.white)
    table.cell(statusTable, 1, 8, "6850", bgcolor=color.new(color.lime, 80), text_color=color.black)
    
    // Distance to key levels
    distTo6930 = level5 - close
    distTo6930Str = distTo6930 > 0 ? "-" + str.tostring(math.abs(distTo6930), "#.#") : "+" + str.tostring(math.abs(distTo6930), "#.#")
    table.cell(statusTable, 0, 9, "To ðŸ”´Res 6930", text_color=color.white)
    table.cell(statusTable, 1, 9, distTo6930Str, bgcolor=color.new(color.red, 80), text_color=color.white)
    
    distTo6885 = level8 - close
    distTo6885Str = distTo6885 > 0 ? "-" + str.tostring(math.abs(distTo6885), "#.#") : "+" + str.tostring(math.abs(distTo6885), "#.#")
    table.cell(statusTable, 0, 10, "To ðŸŸ¢Sup 6885", text_color=color.white)
    table.cell(statusTable, 1, 10, distTo6885Str, bgcolor=color.new(color.lime, 80), text_color=color.black)
    
    distTo7000 = level_collar_strike - close
    distTo7000Str = distTo7000 > 0 ? "-" + str.tostring(math.abs(distTo7000), "#.#") : "+" + str.tostring(math.abs(distTo7000), "#.#")
    table.cell(statusTable, 0, 11, "To ðŸŽ¯Collar 7000", text_color=color.white)
    table.cell(statusTable, 1, 11, distTo7000Str, bgcolor=color.new(color.fuchsia, 80), text_color=color.white)
    
    // Volume Status
    volStatus = volSpike ? "ðŸ”¥ SPIKE" : "Normal"
    volColor = volSpike ? color.orange : color.gray
    table.cell(statusTable, 0, 12, "Volume", text_color=color.white)
    table.cell(statusTable, 1, 12, volStatus, bgcolor=color.new(volColor, 70), text_color=color.white)
    
    // Market Context
    table.cell(statusTable, 0, 13, "Context", text_color=color.white)
    table.cell(statusTable, 1, 13, "ðŸŽ¯ Year-End Flow", bgcolor=color.new(color.fuchsia, 80), text_color=color.white)
    
    table.cell(statusTable, 0, 14, "Main Event", text_color=color.white)
    table.cell(statusTable, 1, 14, "JPM Dec 31 2-3PM", bgcolor=color.new(color.fuchsia, 80), text_color=color.white)
    
    table.cell(statusTable, 0, 15, "Upside", text_color=color.white)
    table.cell(statusTable, 1, 15, "6930->6945->6960->6975", bgcolor=color.new(color.gray, 80), text_color=color.white)
    
    table.cell(statusTable, 0, 16, "Downside", text_color=color.white)
    table.cell(statusTable, 1, 16, "6870->6855->6850->6840", bgcolor=color.new(color.gray, 80), text_color=color.white)
    
    table.cell(statusTable, 0, 17, "CTA Flow", text_color=color.white)
    table.cell(statusTable, 1, 17, "Buyers in down tape", bgcolor=color.new(color.lime, 80), text_color=color.black)

// === PLOT INVISIBLE LINES FOR ALERT TRIGGERS ===
plot(level_collar_strike, "7000 JPM Collar", color=color.new(color.fuchsia, 100))
plot(level1, "6975 Outside Res", color=color.new(color.red, 100))
plot(level2, "6960 Neg GEX", color=color.new(color.red, 100))
plot(level3, "6950 Top EM", color=color.new(color.fuchsia, 100))
plot(level4, "6945 Decision", color=color.new(color.orange, 100))
plot(level5, "6930 Res Top", color=color.new(color.red, 100))
plot(level6, "6925 Res Bot", color=color.new(color.red, 100))
plot(level7, "6900 Round", color=color.new(color.aqua, 100))
plot(level8, "6885 Sup Top", color=color.new(color.lime, 100))
plot(level9, "6880 Support", color=color.new(color.lime, 100))
plot(level10, "6870 Sup Bot", color=color.new(color.lime, 100))
plot(level11, "6855 Gap Hold", color=color.new(color.aqua, 100))
plot(level12, "6850 Gap/GEX", color=color.new(color.lime, 100))
plot(level13, "6840 Below Gap", color=color.new(color.lime, 100))
plot(level14, "6820 Extended", color=color.new(color.lime, 100))
